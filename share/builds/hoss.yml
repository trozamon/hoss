workflow:
  name: hoss
  jobs:
    - name: build
      build: cmake

      source:
        uri: ssh://git.svc.alectenharmsel.com:2222/alec/hoss.git
        type: git

      envs:
        - os::centos::7
        - os::debian::8
        - os::debian::9
        - os::fedora::24
        - os::fedora::25
        - os::ubuntu::16.04
        - os::ubuntu::17.10

    - name: centos7
      build: rpmbuild

      depends_on:
        - build

      source:
        uri: ssh://git.svc.alectenharmsel.com:2222/alec/hoss-centos7.git
        type: git

      envs:
        - os::centos::7

    - name: centos8
      build: rpmbuild

      depends_on:
        - build

      source:
        uri: ssh://git.svc.alectenharmsel.com:2222/alec/hoss-centos8.git
        type: git

      envs:
        - os::centos::8
